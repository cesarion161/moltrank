{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CuratorMemory",
  "type": "object",
  "required": ["agent_id", "policy", "stats"],
  "properties": {
    "agent_id": {
      "type": "string"
    },
    "policy": {
      "type": "object",
      "required": ["confidence_threshold", "stake_preset", "rubric_version"],
      "properties": {
        "confidence_threshold": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "stake_preset": {
          "type": "integer",
          "minimum": 1
        },
        "rubric_version": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "stats": {
      "type": "object",
      "required": ["total_evaluations", "total_skips", "rolling_confidence_avg"],
      "properties": {
        "total_evaluations": {
          "type": "integer",
          "minimum": 0
        },
        "total_skips": {
          "type": "integer",
          "minimum": 0
        },
        "rolling_confidence_avg": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "golden_accuracy_rolling": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "audit_consistency_rolling": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      },
      "additionalProperties": true
    },
    "recent_learning_notes": {
      "type": "array",
      "items": {
        "type": "string",
        "maxLength": 240
      },
      "maxItems": 50
    }
  },
  "additionalProperties": false
}
